---
- name: Common ansible playbook
  hosts: all
  sudo: true
  roles:
    - { role: apache, when: php_engine == 'apache' }
    - common
    - ntp
    - git
    - rmate
    - { role: php-apache, when: php_engine == 'apache' }
    - { role: php-fpm, when: php_engine == 'fpm' }
    - { role: php-hhvm, when: php_engine == 'hhvm' }
    - php-extensions
    - php-maxmind-geoip
    - php-newrelic
    - php-phalcon
    - php-zmq
    - composer
    - { role: nginx, when: php_engine != 'apache' }
    - { role: mariadb, when: db_engine == 'mariadb' }
    - { role: mysql, when: db_engine == 'mysql' }
    - cassandra
    - mongodb
    - influxdb
    - python
    - sharedance
    - java
    - redis
    - elasticsearch
    - scout_realtime
    - { role: beanstalkd, when: queue_engine == 'beanstalkd' }
    - { role: zeromq, when: queue_engine == 'zeromq' }
    - haproxy
    - imagemagick
    - graphicsmagick
    - facedetect